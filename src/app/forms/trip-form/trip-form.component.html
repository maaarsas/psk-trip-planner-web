<form #tripForm="ngForm" (ngSubmit)="onSubmit()">


  <div class="trip-form">
    <label  style="display: inline" for="formControlSearch">Pridėti žmonių:</label>
    <input style="display: inline" id="formControlSearch"
           type="text"
           class="form-control people-input"
           name="person"
           [(ngModel)]="model"
           [ngbTypeahead]="search"
           [resultFormatter]="format"
           [inputFormatter]="format"/>
    <button style="display: inline" class="btn btn-secondary" (click)="addPersonToTrip(model)">
      {{ 'trip-create.add-person' | translate }}
    </button>
  </div>

  <table *ngIf="participants?.length" class="table table-striped">
    <thead>
    <tr>
      <th scope="col">#</th>
      <th scope="col">Id</th>
      <th scope="col">{{ 'trip-create.name' | translate }}</th>
      <th scope="col">{{ 'trip-create.surname' | translate }}</th>
      <th scope="col">{{ 'trip-create.needs-tickets' | translate }}</th>
      <th scope="col">{{ 'trip-create.needs-car' | translate }}</th>
      <th scope="col">{{ 'trip-create.needs-hotel' | translate }}</th>
      <th scope="col">{{ 'trip-create.delete' | translate }}</th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let participant of participants; index as i">
      <th scope="row">{{ i + 1 }}</th>
      <td>
        {{ participant.participant.id }}
      </td>
      <td>{{ participant.participant.name }}</td>
      <td>{{ participant.participant.surname }}</td>
      <td><input type="checkbox" (change)="onTicketStatusChange($event, participant)" name="plane-tickets"></td>
      <td><input type="checkbox" (change)="onRentalStatusChange($event, participant)" name="rental-car"></td>
      <td><input type="checkbox" (change)="onAccommodationStatusChange($event, participant)" name="hotel"></td>
      <td><button (click)="removeParticipant(participant.participant)" class="btn btn-danger">{{ 'trip-create.delete' | translate }}</button></td>
    </tr>
    </tbody>
  </table>

  <div class="dates trip-form d-flex">
    <div>
      <label for="formControlDateFrom">{{ 'trip-create.date-from' | translate }}:</label>
      <input name="dateFrom" type="date" class="form-control" id="formControlDateFrom" (change)="dateFrom = $event.target.value">
    </div>
    <div>
      <label for="formControlDateTo">{{ 'trip-create.date-to' | translate }}</label>
      <input name="dateTo" type="date" class="form-control" id="formControlDateTo" (change)="dateTo = $event.target.value">
    </div>
  </div>

  <div class="offices trip-form d-flex">
    <div>
      <label for="selectFromOffice" class="control-label">{{ 'trip-create.from-office' | translate }}:</label>
      <select (change)="saveFromSelection($event.target.selectedOptions[0].innerText)" name="fromOffice" type="text" class="form-control" id="selectFromOffice">
        <option disabled value=""></option>
        <option *ngFor="let office of offices" [value]="office">
          {{office.title}}
        </option>
      </select>
    </div>
    <div>
      <label for="selectToOffice" class="control-label">{{ 'trip-create.to-office' | translate }}:</label>
      <select (change)="saveToSelection($event.target.selectedOptions[0].innerText)" name="toOffice" type="text" class="form-control" id="selectToOffice">
        <option disabled value=""></option>
        <option *ngFor="let office of offices" value="office">
          {{office.title}}
        </option>
      </select>
    </div>
  </div>

  <button type="submit" class="btn btn-secondary" [disabled]="isFormDisabled()" (click)="submit()">{{ 'trip-create.submit' | translate }}</button>
</form>
